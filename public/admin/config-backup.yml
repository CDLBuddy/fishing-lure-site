backend:
  name: github
  repo: CDLBuddy/fishing-lure-site # <-- your repo
  branch: main
  base_url: https://fishing-lure-site.vercel.app
  auth_endpoint: /api/auth

media_folder: 'public/images/uploads'
public_folder: '/images/uploads'

# uncomment locally if you want to test CMS against your git without OAuth
# local_backend: true

publish_mode: editorial_workflow

# Custom preview styling
editor:
  preview: true

# Apply custom CSS to preview pane
preview_styles:
  - /admin/preview.css

# Slug configuration for cleaner auto-generated IDs
slug:
  encoding: 'ascii'
  clean_accents: true

collections:
  # ========================================
  # CATCHES - Customer Gallery Photos
  # ========================================
  - label: 'ðŸŽ£ Gallery (Catches)'
    name: 'catches'
    label_singular: 'Catch Photo'
    folder: 'content/catches'
    create: true
    slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
    extension: 'json'
    format: 'json'
    summary: '{{title}} â€¢ {{angler}} â€¢ {{species}}'
    sortable_fields: ['title', 'angler', 'date', 'featured']
    view_filters:
      - label: Featured Only
        field: featured
        pattern: true
      - label: Published
        field: status
        pattern: 'published'
    fields:
      # STEP 1: Basic Info
      - label: 'ðŸ“ Basic Information'
        name: 'basic_info_section'
        widget: 'object'
        collapsed: false
        fields:
          - {
              label: 'Auto ID (leave as-is)',
              name: 'id',
              widget: 'string',
              required: false,
              hint: 'Auto-generated from date and title. You can edit if needed.',
              pattern: ['^[a-z0-9-]+$', 'Use lowercase letters, numbers, and hyphens only']
            }
          - {
              label: 'Photo Title/Caption',
              name: 'title',
              widget: 'string',
              hint: 'Example: "Dan\'s 5lb Largemouth Bass" or "Big Pike on Crankbait"'
            }
          - {
              label: 'When was it caught?',
              name: 'date',
              widget: 'datetime',
              default: '',
              date_format: 'MM/DD/YYYY',
              time_format: false,
              required: false
            }

      # STEP 2: Catch Details
      - label: 'ðŸŸ Catch Details'
        name: 'catch_details_section'
        widget: 'object'
        collapsed: false
        fields:
          - {
              label: 'Angler Name',
              name: 'angler',
              widget: 'string',
              required: false,
              hint: 'Who caught it? Give credit!'
            }
          - {
              label: 'Fish Species',
              name: 'species',
              widget: 'select',
              required: false,
              options:
                [
                  'Largemouth Bass',
                  'Smallmouth Bass',
                  'Spotted Bass',
                  'Striped Bass',
                  'Pike',
                  'Muskie',
                  'Walleye',
                  'Crappie',
                  'Bluegill',
                  'Trout',
                  'Catfish',
                  'Redfish',
                  'Snook',
                  'Tarpon',
                  'Other'
                ],
              hint: 'Select the type of fish'
            }
          - {
              label: 'Location',
              name: 'location',
              widget: 'string',
              required: false,
              hint: 'Example: "Lake Michigan" or "St. Lawrence River"'
            }
          - {
              label: 'Length (inches)',
              name: 'lengthIn',
              widget: 'number',
              required: false,
              min: 0,
              max: 100,
              step: 0.5,
              value_type: 'float'
            }
          - {
              label: 'Weight (pounds)',
              name: 'weightLb',
              widget: 'number',
              required: false,
              min: 0,
              max: 100,
              step: 0.1,
              value_type: 'float'
            }

      # STEP 3: Lure Used
      - label: 'ðŸŽ£ Which Lure?'
        name: 'lure_section'
        widget: 'object'
        collapsed: false
        fields:
          - label: 'Lure Used'
            name: 'lureId'
            widget: 'relation'
            collection: 'products'
            search_fields: ['name', 'id']
            value_field: 'id'
            display_fields: ['name', 'category']
            required: false
            hint: 'Link this catch to a product (helps visitors find the lure!)'

      # STEP 4: Photos
      - label: 'ðŸ“¸ Photos'
        name: 'images'
        widget: 'list'
        collapsed: false
        minimize_collapsed: true
        summary: '{{fields.alt}}'
        hint: 'Upload 1-5 photos. First photo is the thumbnail.'
        fields:
          - { label: 'Photo', name: 'src', widget: 'image' }
          - {
              label: 'Photo Description (Alt Text)',
              name: 'alt',
              widget: 'string',
              required: false,
              hint: 'Describe the photo for accessibility'
            }

      # STEP 5: Publishing Options (Collapsed by default)
      - label: 'âš™ï¸ Publishing Options'
        name: 'publishing_section'
        widget: 'object'
        collapsed: true
        fields:
          - {
              label: 'Status',
              name: 'status',
              widget: 'select',
              options:
                [
                  { label: 'âœï¸ Draft (not visible)', value: 'draft' },
                  { label: 'âœ… Published (visible)', value: 'published' }
                ],
              default: 'draft',
              hint: 'Set to Published when ready to show on site'
            }
          - {
              label: 'â­ Featured',
              name: 'featured',
              widget: 'boolean',
              default: false,
              required: false,
              hint: 'Highlight this catch at the top of gallery'
            }
          - {
              label: 'Sort Order',
              name: 'sort',
              widget: 'number',
              required: false,
              hint: 'Lower numbers appear first (leave blank for auto-sort by date)'
            }
          - {
              label: 'Tags',
              name: 'tags',
              widget: 'list',
              required: false,
              hint: 'Keywords for filtering (e.g., summer, trophy, bass)'
            }
          - {
              label: 'Publish Date',
              name: 'publishedAt',
              widget: 'datetime',
              required: false,
              hint: 'Optional: Set specific publish date/time'
            }

  # ========================================
  # PRODUCTS - Lure Catalog
  # ========================================
  - label: 'ðŸŽ£ Products (Lures)'
    name: 'products'
    label_singular: 'Product'
    folder: 'content/products'
    create: true
    slug: '{{slug}}'
    extension: 'json'
    format: 'json'
    summary: '{{name}} â€¢ {{category}}'
    sortable_fields: ['name', 'category', 'featured', 'sort']
    view_filters:
      - label: Featured Only
        field: featured
        pattern: true
      - label: Active Products
        field: status
        pattern: 'active'
      - label: By Category
        field: category
        pattern: ''
    fields:
      # STEP 1: Basic Product Info
      - label: 'ðŸ“ Basic Product Info'
        name: 'basic_section'
        widget: 'object'
        collapsed: false
        fields:
          - {
              label: 'Product ID',
              name: 'id',
              widget: 'string',
              hint: 'Short code (e.g., sb-001, crank-blue). Cannot change after creation!',
              pattern: ['^[a-z0-9-]+$', 'Use lowercase letters, numbers, and hyphens only']
            }
          - {
              label: 'Product Name',
              name: 'name',
              widget: 'string',
              hint: 'Example: "River Shimmer Spinnerbait" or "Deep Dive Crankbait"'
            }
          - {
              label: 'Category',
              name: 'category',
              widget: 'select',
              options:
                [
                  { label: 'ðŸŒ€ Spinnerbait', value: 'spinnerbait' },
                  { label: 'ðŸª Jig', value: 'jig' },
                  { label: 'ðŸ  Crankbait', value: 'crankbait' },
                  { label: 'ðŸŒŠ Topwater', value: 'topwater' },
                  { label: 'ðŸª± Soft Plastic', value: 'soft-plastic' }
                ],
              hint: 'What type of lure is this?'
            }

      # STEP 2: Description
      - {
          label: 'ðŸ“„ Description',
          name: 'description',
          widget: 'text',
          hint: 'Describe the lure, how it works, best conditions, target species, etc.',
          pattern: ['^.{20,}$', 'Please write at least 20 characters']
        }

      # STEP 3: Photos
      - label: 'ðŸ“¸ Product Photos'
        name: 'images'
        widget: 'list'
        collapsed: false
        minimize_collapsed: true
        summary: 'Photo {{index}}'
        hint: 'Upload 1-5 product photos. First photo is main image.'
        field: { label: 'Image', name: 'src', widget: 'image' }

      # STEP 4: Variants (Sizes/Colors)
      - label: 'ðŸŽ¨ Variants (Sizes/Colors/Weights)'
        name: 'variants'
        widget: 'list'
        collapsed: false
        minimize_collapsed: true
        summary: '{{fields.label}} â€¢ ${{fields.price}}'
        hint: 'Add different options: sizes, colors, weights, etc.'
        fields:
          - {
              label: 'Variant ID',
              name: 'id',
              widget: 'string',
              hint: 'Internal code (e.g., v1, 3-8oz-chart, blue-sm)',
              pattern: ['^[a-z0-9-]+$', 'Use lowercase letters, numbers, and hyphens']
            }
          - label: 'Variant Label (What customer sees)'
            name: 'label'
            widget: 'select'
            options:
              # Weight options
              - { label: '1/8 oz', value: '1/8 oz' }
              - { label: '1/4 oz', value: '1/4 oz' }
              - { label: '3/8 oz', value: '3/8 oz' }
              - { label: '1/2 oz', value: '1/2 oz' }
              - { label: '3/4 oz', value: '3/4 oz' }
              - { label: '1 oz', value: '1 oz' }
              # Color options
              - { label: 'Chartreuse', value: 'Chartreuse' }
              - { label: 'White', value: 'White' }
              - { label: 'Black', value: 'Black' }
              - { label: 'Blue', value: 'Blue' }
              - { label: 'Silver', value: 'Silver' }
              - { label: 'Gold', value: 'Gold' }
              - { label: 'Red', value: 'Red' }
              - { label: 'Green', value: 'Green' }
              - { label: 'Purple', value: 'Purple' }
              - { label: 'Brown/Orange', value: 'Brown/Orange' }
              - { label: 'Natural Shad', value: 'Natural Shad' }
              - { label: 'Fire Tiger', value: 'Fire Tiger' }
              # Combo options
              - { label: '1/8 oz â€¢ Chartreuse', value: '1/8 oz â€¢ Chartreuse' }
              - { label: '1/4 oz â€¢ Chartreuse', value: '1/4 oz â€¢ Chartreuse' }
              - { label: '3/8 oz â€¢ Chartreuse', value: '3/8 oz â€¢ Chartreuse' }
              - { label: '1/2 oz â€¢ Chartreuse', value: '1/2 oz â€¢ Chartreuse' }
              - { label: '1/8 oz â€¢ White', value: '1/8 oz â€¢ White' }
              - { label: '1/4 oz â€¢ White', value: '1/4 oz â€¢ White' }
              - { label: '3/8 oz â€¢ White', value: '3/8 oz â€¢ White' }
              - { label: '1/2 oz â€¢ White', value: '1/2 oz â€¢ White' }
              - { label: 'Custom Option', value: 'Custom' }
            allow_add: true
            hint: 'Example: "3/8 oz â€¢ Chartreuse" or just "Blue". Can type custom option.'
          - {
              label: 'SKU (your inventory code)',
              name: 'sku',
              widget: 'string',
              hint: 'Your internal product code'
            }
          - {
              label: 'Price (USD)',
              name: 'price',
              widget: 'number',
              required: false,
              min: 0,
              step: 0.01,
              value_type: 'float',
              hint: 'Display price. Example: 12.99'
            }
          - {
              label: 'Stripe Price ID',
              name: 'stripePriceId',
              widget: 'string',
              required: false,
              hint: 'Leave blank until checkout is enabled'
            }

      # STEP 5: Publishing Options (Collapsed)
        name: 'images'
        widget: 'list'
        field: { label: 'Image', name: 'src', widget: 'image' } # results in [{ "src": "/images/uploads/â€¦" }]
      - label: 'Variants'
        name: 'variants'
        widget: 'list'
        summary: '{{fields.label}}'
        fields:
          - { label: 'Variant ID', name: 'id', widget: 'string' }
          - { label: 'Label', name: 'label', widget: 'string', hint: 'e.g., 3/8 oz â€¢ Chartreuse' }
          - { label: 'SKU', name: 'sku', widget: 'string' }
          - { label: 'Stripe Price ID', name: 'stripePriceId', widget: 'string', required: false }
          - {
              label: 'Price (USD)',
              name: 'price',
              widget: 'number',
              required: false,
              min: 0,
              step: 0.01,
            }
      - { label: 'Tags', name: 'tags', widget: 'list', required: false }
      - { label: 'Featured', name: 'featured', widget: 'boolean', default: false, required: false }
      - {
          label: 'Status',
          name: 'status',
          widget: 'select',
          options: ['draft', 'active', 'hidden'],
          default: 'active',
          required: false,
        }
      - { label: 'Sort', name: 'sort', widget: 'number', required: false }
      - { label: 'Published At', name: 'publishedAt', widget: 'datetime', required: false }
