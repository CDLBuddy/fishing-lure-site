<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Admin</title>
    <meta name="robots" content="noindex, nofollow" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Decap CMS -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

    <style>
      :root { color-scheme: light dark }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      }
      /* Floating Owner Guide button */
      .owner-guide {
        position: fixed; top: 10px; right: 10px; z-index: 10000;
        background: #111827; color: #e5e7eb;
        border: 1px solid rgba(255,255,255,.12);
        padding: 8px 10px; border-radius: 8px;
        font: 600 12px/1.1 ui-sans-serif,system-ui;
        text-decoration: none;
      }
      .owner-guide:hover { opacity: .9 }
      /* noscript box */
      .noscript {
        max-width: 720px; margin: 24px auto; padding: 12px 16px;
        border: 1px solid rgba(0,0,0,.15);
        background: #fffbe6; color: #111827; border-radius: 8px;
      }
    </style>

    <script>
      // Ensure Decap initializes and preview iframe inherits site styles
      window.addEventListener('DOMContentLoaded', () => {
        const boot = () => {
          if (!window.CMS) return;

          // Explicit init (defensive)
          try { window.CMS.init(); } catch {}

          // Match site styles in preview pane
          try {
            CMS.registerPreviewStyle('/styles/tokens.css');
            CMS.registerPreviewStyle('/styles/base.css');
          } catch {}
        };

        if (window.CMS) boot();
        else {
          const i = setInterval(() => {
            if (window.CMS) { clearInterval(i); boot(); }
          }, 50);
          // stop trying after ~10s just in case
          setTimeout(() => clearInterval(i), 10000);
        }
      });
    </script>
  </head>
  <body>
    <!-- Owner Guide (opens in new tab) -->
    <a
      class="owner-guide"
      href="/owner-guide.html"
      target="_blank" rel="noopener nofollow"
    >Owner Guide â†—</a>

    <noscript>
      <div class="noscript">
        <strong>JavaScript is required</strong> to use the admin. Please enable JavaScript and reload this page.
      </div>
    </noscript>
  </body>
</html>